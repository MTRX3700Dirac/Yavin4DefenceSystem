<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Yavin IV Death Star Tracker: Yavin4DefenceSystem/Code/Range.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Eaw_Yavin4 - thumb.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Yavin IV Death Star Tracker
   &#160;<span id="projectnumber">V1.1</span>
   </div>
   <div id="projectbrief">Yavin&#39;s premiere line of defence against the encroaching Imperial Star Fleet and Death Star</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Range_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Range.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="Common_8h_source.html">Common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Temp_8h_source.html">Temp.h</a>&quot;</code><br />
<code>#include &lt;delays.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for Range.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c__incl.png" border="0" usemap="#Yavin4DefenceSystem_2Code_2Range_8c" alt=""/></div>
<map name="Yavin4DefenceSystem_2Code_2Range_8c" id="Yavin4DefenceSystem_2Code_2Range_8c">
<area shape="rect" id="node2" href="Common_8h.html" title="Common.h" alt="" coords="407,95,492,121"/><area shape="rect" id="node14" href="Temp_8h.html" title="Temp.h" alt="" coords="517,95,582,121"/><area shape="rect" id="node7" href="p18f4520_8h.html" title="p18f4520.h" alt="" coords="356,169,441,196"/><area shape="rect" id="node11" href="usart_8h.html" title="usart.h" alt="" coords="738,169,801,196"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a13235bb583d24031d4129a10c126ef8e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a13235bb583d24031d4129a10c126ef8e">IR_CONV</a>(ad)&#160;&#160;&#160;((unsigned long)135174 / (ad) - 28)</td></tr>
<tr class="memdesc:a13235bb583d24031d4129a10c126ef8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts AD reading into IR range.  <a href="#a13235bb583d24031d4129a10c126ef8e">More...</a><br /></td></tr>
<tr class="separator:a13235bb583d24031d4129a10c126ef8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a354db24d9e733cf8b3e15f727ab46624"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a354db24d9e733cf8b3e15f727ab46624">ULTRA_CONV</a>(tme, T)&#160;&#160;&#160;<a class="el" href="Common_8h.html#a9469c415aff989522dac534ab8adb35e">DIV_65536</a>(tme * (unsigned long)(<a class="el" href="Common_8h.html#a9469c415aff989522dac534ab8adb35e">DIV_65536</a>((unsigned long)519078 * T) + (unsigned long)4362)) - 18</td></tr>
<tr class="separator:a354db24d9e733cf8b3e15f727ab46624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885e4c51dcc91fcae14dadc2d564f270"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a885e4c51dcc91fcae14dadc2d564f270">INIT_PIN</a>&#160;&#160;&#160;<a class="el" href="p18f4520_8h.html#ae6cab3544e1e4b7eaec41046bf007800">PORTCbits.RC3</a></td></tr>
<tr class="separator:a885e4c51dcc91fcae14dadc2d564f270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6430371976f713ccccb6372b19b810"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a6e6430371976f713ccccb6372b19b810">INIT_TRIS</a>&#160;&#160;&#160;<a class="el" href="p18f4520_8h.html#ae6cab3544e1e4b7eaec41046bf007800">TRISCbits.RC3</a></td></tr>
<tr class="separator:a6e6430371976f713ccccb6372b19b810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa42da5a67cdb563f37b56c1674dd67bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#aa42da5a67cdb563f37b56c1674dd67bb">CCP1_INPT</a>&#160;&#160;&#160;<a class="el" href="p18f4520_8h.html#a2155381890524f46a1a03878e5f52682">TRISCbits.RC2</a></td></tr>
<tr class="separator:aa42da5a67cdb563f37b56c1674dd67bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29a8f7ec1da49306cd91012204229f79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a29a8f7ec1da49306cd91012204229f79">range_IR</a>&#160;&#160;&#160;sumIR</td></tr>
<tr class="separator:a29a8f7ec1da49306cd91012204229f79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae485e01f6cadccf9f60a617cce776df4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#ae485e01f6cadccf9f60a617cce776df4">range_US</a>&#160;&#160;&#160;sumUS</td></tr>
<tr class="separator:ae485e01f6cadccf9f60a617cce776df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4571d632d0c84c18c4aefd1c7b63cb8a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a4571d632d0c84c18c4aefd1c7b63cb8a">beginUS</a> (void)</td></tr>
<tr class="separator:a4571d632d0c84c18c4aefd1c7b63cb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af470fd0f0b96399b344f11783b4ef7f3"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3">rangeUS</a> (unsigned char temp)</td></tr>
<tr class="separator:af470fd0f0b96399b344f11783b4ef7f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71fa1634c2a7d76287ac872b5cfed382"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382">fuseRange</a> (unsigned int us, unsigned int ir)</td></tr>
<tr class="separator:a71fa1634c2a7d76287ac872b5cfed382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a4c592815b5e6ae178f93a7764ceb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a07a4c592815b5e6ae178f93a7764ceb2">configureRange</a> (void)</td></tr>
<tr class="separator:a07a4c592815b5e6ae178f93a7764ceb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7337ef2da4c9ab03257562ec33bbb8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a">configureAD</a> (void)</td></tr>
<tr class="separator:ac7337ef2da4c9ab03257562ec33bbb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64e9d21d140ac54a306dab455b49adcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a64e9d21d140ac54a306dab455b49adcf">rangeISR</a> (void)</td></tr>
<tr class="separator:a64e9d21d140ac54a306dab455b49adcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8606bd1052dde0e7c32eddad8699f4f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4">calibrateRange</a> (unsigned int reference)</td></tr>
<tr class="separator:a8606bd1052dde0e7c32eddad8699f4f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90ce8835c75e17b8e2d15eca3e6ae82f"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a90ce8835c75e17b8e2d15eca3e6ae82f">rawRange</a> (void)</td></tr>
<tr class="separator:a90ce8835c75e17b8e2d15eca3e6ae82f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3698f3a7b3b5963d8e6b305a165d71"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#aff3698f3a7b3b5963d8e6b305a165d71">range</a> (void)</td></tr>
<tr class="memdesc:aff3698f3a7b3b5963d8e6b305a165d71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Samples the range.  <a href="#aff3698f3a7b3b5963d8e6b305a165d71">More...</a><br /></td></tr>
<tr class="separator:aff3698f3a7b3b5963d8e6b305a165d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5554f5a076ded63b937d50b7e5c9db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Common_8h.html#a2db986326a654991cce9b1c2b1670677">TargetState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a3e5554f5a076ded63b937d50b7e5c9db">getTargetState</a> (void)</td></tr>
<tr class="separator:a3e5554f5a076ded63b937d50b7e5c9db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c8e64ddc596f3e6b72ee861f671168"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Common_8h.html#a2db986326a654991cce9b1c2b1670677">TargetState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a87c8e64ddc596f3e6b72ee861f671168">readTargetState</a> (void)</td></tr>
<tr class="separator:a87c8e64ddc596f3e6b72ee861f671168"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4b6dc56220469aa5e4180dad6d68335f"><td class="memItemLeft" align="right" valign="top">static volatile char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a4b6dc56220469aa5e4180dad6d68335f">measuringUS</a> = 0</td></tr>
<tr class="separator:a4b6dc56220469aa5e4180dad6d68335f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3cf40ad92b220b5e39aa159caa45f65"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#ad3cf40ad92b220b5e39aa159caa45f65">lastRange</a> = 0</td></tr>
<tr class="separator:ad3cf40ad92b220b5e39aa159caa45f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44690364de54cfeef62a4e79880603c7"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a44690364de54cfeef62a4e79880603c7">lastUSRange</a> = 0</td></tr>
<tr class="separator:a44690364de54cfeef62a4e79880603c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7f4dddd362aafa4a558c057f89319f"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#aab7f4dddd362aafa4a558c057f89319f">lastIRRange</a> = 0</td></tr>
<tr class="separator:aab7f4dddd362aafa4a558c057f89319f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8976a8edd47f4f691d54e563d4e649b7"><td class="memItemLeft" align="right" valign="top">static signed int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a8976a8edd47f4f691d54e563d4e649b7">calibration_offset_IR</a> = 0</td></tr>
<tr class="separator:a8976a8edd47f4f691d54e563d4e649b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af421fb22b292f4b39367c73817a26993"><td class="memItemLeft" align="right" valign="top">static signed int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#af421fb22b292f4b39367c73817a26993">calibration_offset_US</a> = 0</td></tr>
<tr class="separator:af421fb22b292f4b39367c73817a26993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f013ef4cde14fb1aad7b871dba2c743"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a5f013ef4cde14fb1aad7b871dba2c743">numSamples</a> = 3</td></tr>
<tr class="separator:a5f013ef4cde14fb1aad7b871dba2c743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4a5266a7e06afbf25a15633e657c49f"><td class="memItemLeft" align="right" valign="top">static unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#ae4a5266a7e06afbf25a15633e657c49f">rateUS</a> = 10</td></tr>
<tr class="separator:ae4a5266a7e06afbf25a15633e657c49f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58a5e610e756c41b622dade80cadeb6"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#ad58a5e610e756c41b622dade80cadeb6">rateIR</a> = 200</td></tr>
<tr class="separator:ad58a5e610e756c41b622dade80cadeb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5f92f759a1957263c83a507c449b39"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="Common_8h.html#a2db986326a654991cce9b1c2b1670677">TargetState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Range_8c.html#a3e5f92f759a1957263c83a507c449b39">current_target_state</a></td></tr>
<tr class="separator:a3e5f92f759a1957263c83a507c449b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aa42da5a67cdb563f37b56c1674dd67bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCP1_INPT&#160;&#160;&#160;<a class="el" href="p18f4520_8h.html#a2155381890524f46a1a03878e5f52682">TRISCbits.RC2</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a885e4c51dcc91fcae14dadc2d564f270"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_PIN&#160;&#160;&#160;<a class="el" href="p18f4520_8h.html#ae6cab3544e1e4b7eaec41046bf007800">PORTCbits.RC3</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6e6430371976f713ccccb6372b19b810"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_TRIS&#160;&#160;&#160;<a class="el" href="p18f4520_8h.html#ae6cab3544e1e4b7eaec41046bf007800">TRISCbits.RC3</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a13235bb583d24031d4129a10c126ef8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IR_CONV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ad</td><td>)</td>
          <td>&#160;&#160;&#160;((unsigned long)135174 / (ad) - 28)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts AD reading into IR range. </p>
<hr/>
<p> File: <a class="el" href="Range_8c.html">Range.c</a> Author: Grant</p>
<p>Description: Contains all the functionality for the range module. All variables and settings concerning the range module including the the max distance, timeouts etc are private to this module. The interface functions allow all valid access to the module.</p>
<p>Duties: -Interface to the IR and Ultrasonic sensors -Read the range from the IR and ultrasonic sensors -Fuse distances from the IR and ultrasonic sensors -Calibrate the IR and ultrasonic sensors</p>
<p>Functions:</p>
<p>Created on 15 September 2014, 11:27 AM </p>

</div>
</div>
<a class="anchor" id="a29a8f7ec1da49306cd91012204229f79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define range_IR&#160;&#160;&#160;sumIR</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae485e01f6cadccf9f60a617cce776df4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define range_US&#160;&#160;&#160;sumUS</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a354db24d9e733cf8b3e15f727ab46624"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ULTRA_CONV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tme, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">T&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="Common_8h.html#a9469c415aff989522dac534ab8adb35e">DIV_65536</a>(tme * (unsigned long)(<a class="el" href="Common_8h.html#a9469c415aff989522dac534ab8adb35e">DIV_65536</a>((unsigned long)519078 * T) + (unsigned long)4362)) - 18</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts a time delay (in clock cycles) and a temperature into an ultrasonic distance Uses a linear appoximation of the speed of sound to temperature relation, which changes the gradient of the Ultrasonic calibration </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4571d632d0c84c18c4aefd1c7b63cb8a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void beginUS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#a4571d632d0c84c18c4aefd1c7b63cb8a">beginUS(void)</a></p>
<p>Include: ultrasonic.h</p>
<p>Description: starts a scan on the ultrasonic sensor</p>
<p>Arguments: None</p>
<p>Returns: None </p>

<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a4571d632d0c84c18c4aefd1c7b63cb8a_icgraph.png" border="0" usemap="#Range_8c_a4571d632d0c84c18c4aefd1c7b63cb8a_icgraph" alt=""/></div>
<map name="Range_8c_a4571d632d0c84c18c4aefd1c7b63cb8a_icgraph" id="Range_8c_a4571d632d0c84c18c4aefd1c7b63cb8a_icgraph">
<area shape="rect" id="node2" href="Range_8h.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="124,107,179,133"/><area shape="rect" id="node3" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="248,5,320,32"/><area shape="rect" id="node4" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4" title="calibrateRange" alt="" coords="230,56,338,83"/><area shape="rect" id="node5" href="Range_8h.html#a87c8e64ddc596f3e6b72ee861f671168" title="readTargetState" alt="" coords="227,107,341,133"/><area shape="rect" id="node8" href="Tracking_8h.html#a4f0ebbcddf842d008fbfebb705374c30" title="track" alt="" coords="395,157,445,184"/><area shape="rect" id="node9" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="243,208,325,235"/><area shape="rect" id="node6" href="Tracking_8h.html#ac80b505821d79e98e9108b12d12c5db9" title="search" alt="" coords="389,107,451,133"/><area shape="rect" id="node7" href="newmain_8c.html#acdef7a1fd863a6d3770c1268cb06add3" title="Program entry point. " alt="" coords="499,132,549,159"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8606bd1052dde0e7c32eddad8699f4f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calibrateRange </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>reference</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4">calibrateRange(unsigned int reference)</a></p>
<p>Include:</p>
<p>Description: Calibrates the range of both the IR and ultrasonic sensors based on a given range.</p>
<p>Arguments: reference - The distance in mm to calibrate the current measurements from</p>
<p>Returns: None </p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a8606bd1052dde0e7c32eddad8699f4f4_cgraph.png" border="0" usemap="#Range_8c_a8606bd1052dde0e7c32eddad8699f4f4_cgraph" alt=""/></div>
<map name="Range_8c_a8606bd1052dde0e7c32eddad8699f4f4_cgraph" id="Range_8c_a8606bd1052dde0e7c32eddad8699f4f4_cgraph">
<area shape="rect" id="node2" href="Range_8c.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="161,132,216,159"/><area shape="rect" id="node3" href="Range_8c.html#a07a4c592815b5e6ae178f93a7764ceb2" title="configureRange" alt="" coords="264,31,375,57"/><area shape="rect" id="node7" href="Range_8c.html#a4571d632d0c84c18c4aefd1c7b63cb8a" title="beginUS" alt="" coords="284,81,355,108"/><area shape="rect" id="node8" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="283,132,355,159"/><area shape="rect" id="node9" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="278,183,361,209"/><area shape="rect" id="node4" href="Temp_8c.html#afd08db2b1a6d6af19e39f10dc453332c" title="readTemp" alt="" coords="429,5,508,32"/><area shape="rect" id="node6" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a" title="configureAD" alt="" coords="423,56,515,83"/><area shape="rect" id="node5" href="Temp_8c.html#a4946ccbc1990e831667bffded1147c4f" title="readTempx2" alt="" coords="563,5,656,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7337ef2da4c9ab03257562ec33bbb8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configureAD </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a">configureAD(void)</a></p>
<p>Include: <a class="el" href="Range_8h.html">Range.h</a></p>
<p>Description: Configures the ADC, In ADCON1, we set right-justified mode, and select AN0 as the input channel. In ADCON0, we set a sample rate of Fosc/8, select AN0, and enable the ADC. Arguments: None</p>
<p>Returns: None </p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_ac7337ef2da4c9ab03257562ec33bbb8a_icgraph.png" border="0" usemap="#Range_8c_ac7337ef2da4c9ab03257562ec33bbb8a_icgraph" alt=""/></div>
<map name="Range_8c_ac7337ef2da4c9ab03257562ec33bbb8a_icgraph" id="Range_8c_ac7337ef2da4c9ab03257562ec33bbb8a_icgraph">
<area shape="rect" id="node2" href="Range_8h.html#a07a4c592815b5e6ae178f93a7764ceb2" title="configureRange" alt="" coords="145,196,256,223"/><area shape="rect" id="node13" href="Temp_8h.html#af6785da0c9b3c637b09522617d3f9dba" title="configureTemp" alt="" coords="147,247,254,273"/><area shape="rect" id="node14" href="User__Interface_8h.html#a58e473ed40d00e18bd61277428e4d36c" title="configUSER" alt="" coords="319,297,411,324"/><area shape="rect" id="node3" href="Range_8h.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="338,132,393,159"/><area shape="rect" id="node11" href="Tracking_8h.html#ac9b1c5bae39806310b74e2f69d9ee3b6" title="configureTracking" alt="" coords="304,221,427,248"/><area shape="rect" id="node4" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="496,5,568,32"/><area shape="rect" id="node5" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4" title="calibrateRange" alt="" coords="478,56,586,83"/><area shape="rect" id="node6" href="Range_8h.html#a87c8e64ddc596f3e6b72ee861f671168" title="readTargetState" alt="" coords="475,107,589,133"/><area shape="rect" id="node9" href="Tracking_8h.html#a4f0ebbcddf842d008fbfebb705374c30" title="track" alt="" coords="663,157,713,184"/><area shape="rect" id="node10" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="491,208,573,235"/><area shape="rect" id="node7" href="Tracking_8h.html#ac80b505821d79e98e9108b12d12c5db9" title="search" alt="" coords="657,107,719,133"/><area shape="rect" id="node8" href="newmain_8c.html#acdef7a1fd863a6d3770c1268cb06add3" title="Program entry point. " alt="" coords="787,189,837,216"/><area shape="rect" id="node12" href="newmain_8c.html#a1ff28a3e20f1261c410c00f62e9f9c33" title="initialization" alt="" coords="487,259,577,285"/><area shape="rect" id="node15" href="Menusystem_8h.html#a94b96ccbb8f3c627c5d59189498a3c1b" title="Initialises the menu system. " alt="" coords="637,297,739,324"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a07a4c592815b5e6ae178f93a7764ceb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configureRange </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#a07a4c592815b5e6ae178f93a7764ceb2">configureRange(void)</a></p>
<p>Include: <a class="el" href="Range_8h.html">Range.h</a></p>
<p>Description: Configures the Range module</p>
<p>Arguments: None</p>
<p>Returns: None </p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_cgraph.png" border="0" usemap="#Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_cgraph" alt=""/></div>
<map name="Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_cgraph" id="Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_cgraph">
<area shape="rect" id="node2" href="Temp_8c.html#afd08db2b1a6d6af19e39f10dc453332c" title="readTemp" alt="" coords="171,5,249,32"/><area shape="rect" id="node4" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a" title="configureAD" alt="" coords="164,56,256,83"/><area shape="rect" id="node3" href="Temp_8c.html#a4946ccbc1990e831667bffded1147c4f" title="readTempx2" alt="" coords="304,5,397,32"/></map>
</div>
</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_icgraph.png" border="0" usemap="#Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_icgraph" alt=""/></div>
<map name="Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_icgraph" id="Range_8c_a07a4c592815b5e6ae178f93a7764ceb2_icgraph">
<area shape="rect" id="node2" href="Range_8h.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="198,132,253,159"/><area shape="rect" id="node10" href="Tracking_8h.html#ac9b1c5bae39806310b74e2f69d9ee3b6" title="configureTracking" alt="" coords="164,208,287,235"/><area shape="rect" id="node3" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="356,5,428,32"/><area shape="rect" id="node4" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4" title="calibrateRange" alt="" coords="338,56,446,83"/><area shape="rect" id="node5" href="Range_8h.html#a87c8e64ddc596f3e6b72ee861f671168" title="readTargetState" alt="" coords="335,107,449,133"/><area shape="rect" id="node8" href="Tracking_8h.html#a4f0ebbcddf842d008fbfebb705374c30" title="track" alt="" coords="517,157,568,184"/><area shape="rect" id="node9" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="351,208,433,235"/><area shape="rect" id="node6" href="Tracking_8h.html#ac80b505821d79e98e9108b12d12c5db9" title="search" alt="" coords="512,107,573,133"/><area shape="rect" id="node7" href="newmain_8c.html#acdef7a1fd863a6d3770c1268cb06add3" title="Program entry point. " alt="" coords="636,157,687,184"/><area shape="rect" id="node11" href="newmain_8c.html#a1ff28a3e20f1261c410c00f62e9f9c33" title="initialization" alt="" coords="497,233,588,260"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a71fa1634c2a7d76287ac872b5cfed382"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int fuseRange </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>us</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382">fuseRange(unsigned int us, unsigned int ir)</a></p>
<p>Include: <a class="el" href="Range_8h.html">Range.h</a></p>
<p>Description: Fuses the IR and Ultrasonic ranges, and sets the target state</p>
<p>Arguments: us - the Ultrasonic range (mm) ir - the IR range (mm)</p>
<p>Returns: the fused range</p>
<p>Note: Also sets the current target state based on the reading from both the IR and ultrsonic sensors </p>
<p>Implement IR in here a little?</p>
<p>: Report Error? </p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a71fa1634c2a7d76287ac872b5cfed382_cgraph.png" border="0" usemap="#Range_8c_a71fa1634c2a7d76287ac872b5cfed382_cgraph" alt=""/></div>
<map name="Range_8c_a71fa1634c2a7d76287ac872b5cfed382_cgraph" id="Range_8c_a71fa1634c2a7d76287ac872b5cfed382_cgraph">
<area shape="rect" id="node2" href="Range_8c.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="136,107,191,133"/><area shape="rect" id="node3" href="Range_8c.html#a07a4c592815b5e6ae178f93a7764ceb2" title="configureRange" alt="" coords="239,31,349,57"/><area shape="rect" id="node7" href="Range_8c.html#a4571d632d0c84c18c4aefd1c7b63cb8a" title="beginUS" alt="" coords="259,81,329,108"/><area shape="rect" id="node8" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="258,132,330,159"/><area shape="rect" id="node4" href="Temp_8c.html#afd08db2b1a6d6af19e39f10dc453332c" title="readTemp" alt="" coords="404,5,483,32"/><area shape="rect" id="node6" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a" title="configureAD" alt="" coords="397,56,489,83"/><area shape="rect" id="node5" href="Temp_8c.html#a4946ccbc1990e831667bffded1147c4f" title="readTempx2" alt="" coords="537,5,631,32"/></map>
</div>
</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a71fa1634c2a7d76287ac872b5cfed382_icgraph.png" border="0" usemap="#Range_8c_a71fa1634c2a7d76287ac872b5cfed382_icgraph" alt=""/></div>
<map name="Range_8c_a71fa1634c2a7d76287ac872b5cfed382_icgraph" id="Range_8c_a71fa1634c2a7d76287ac872b5cfed382_icgraph">
<area shape="rect" id="node2" href="Range_8h.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="136,56,191,83"/><area shape="rect" id="node3" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="260,5,332,32"/><area shape="rect" id="node4" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4" title="calibrateRange" alt="" coords="242,56,350,83"/><area shape="rect" id="node5" href="Range_8h.html#a87c8e64ddc596f3e6b72ee861f671168" title="readTargetState" alt="" coords="239,107,353,133"/><area shape="rect" id="node8" href="Tracking_8h.html#a4f0ebbcddf842d008fbfebb705374c30" title="track" alt="" coords="407,157,457,184"/><area shape="rect" id="node6" href="Tracking_8h.html#ac80b505821d79e98e9108b12d12c5db9" title="search" alt="" coords="401,107,463,133"/><area shape="rect" id="node7" href="newmain_8c.html#acdef7a1fd863a6d3770c1268cb06add3" title="Program entry point. " alt="" coords="511,132,561,159"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3e5554f5a076ded63b937d50b7e5c9db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Common_8h.html#a2db986326a654991cce9b1c2b1670677">TargetState</a> getTargetState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#a3e5554f5a076ded63b937d50b7e5c9db">getTargetState(void)</a></p>
<p>Include: <a class="el" href="Range_8h.html">Range.h</a></p>
<p>Description: Returns the target state from the last range reading. E.g. Good track, or direction not quite correct as US returned, but IR didn't and was within IR range etc.</p>
<p>Arguments: None</p>
<p>Returns: the target state </p>

</div>
</div>
<a class="anchor" id="aff3698f3a7b3b5963d8e6b305a165d71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int range </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Samples the range. </p>
<hr/>
<p> Function: <a class="el" href="Range_8c.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. ">range(void)</a></p>
<p>Include: <a class="el" href="Range_8h.html">Range.h</a></p>
<p>Description: Takes a number of samples of the ultrasonic sensor at a specified rate. Continues to sample the IR sensor at a different rate while sampling the ultrasonic. Then combines the ranges and sets the target state</p>
<p>Arguments: None</p>
<p>Returns: the range </p>
<p>Standard room temperature for now</p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Read in temperature for US calculation </dd></dl>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_cgraph.png" border="0" usemap="#Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_cgraph" alt=""/></div>
<map name="Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_cgraph" id="Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_cgraph">
<area shape="rect" id="node2" href="Range_8c.html#a07a4c592815b5e6ae178f93a7764ceb2" title="configureRange" alt="" coords="108,31,219,57"/><area shape="rect" id="node6" href="Range_8c.html#a4571d632d0c84c18c4aefd1c7b63cb8a" title="beginUS" alt="" coords="128,81,199,108"/><area shape="rect" id="node7" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="127,132,199,159"/><area shape="rect" id="node8" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="122,183,205,209"/><area shape="rect" id="node3" href="Temp_8c.html#afd08db2b1a6d6af19e39f10dc453332c" title="readTemp" alt="" coords="273,5,352,32"/><area shape="rect" id="node5" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a" title="configureAD" alt="" coords="267,56,359,83"/><area shape="rect" id="node4" href="Temp_8c.html#a4946ccbc1990e831667bffded1147c4f" title="readTempx2" alt="" coords="407,5,500,32"/></map>
</div>
</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_icgraph.png" border="0" usemap="#Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_icgraph" alt=""/></div>
<map name="Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_icgraph" id="Range_8c_aff3698f3a7b3b5963d8e6b305a165d71_icgraph">
<area shape="rect" id="node2" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="108,107,180,133"/><area shape="rect" id="node4" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4" title="calibrateRange" alt="" coords="334,5,442,32"/><area shape="rect" id="node5" href="Range_8h.html#a87c8e64ddc596f3e6b72ee861f671168" title="readTargetState" alt="" coords="331,56,445,83"/><area shape="rect" id="node8" href="Tracking_8h.html#a4f0ebbcddf842d008fbfebb705374c30" title="track" alt="" coords="499,107,549,133"/><area shape="rect" id="node9" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="347,157,429,184"/><area shape="rect" id="node3" href="Range_8h.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="228,107,283,133"/><area shape="rect" id="node6" href="Tracking_8h.html#ac80b505821d79e98e9108b12d12c5db9" title="search" alt="" coords="493,56,555,83"/><area shape="rect" id="node7" href="newmain_8c.html#acdef7a1fd863a6d3770c1268cb06add3" title="Program entry point. " alt="" coords="603,81,653,108"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a64e9d21d140ac54a306dab455b49adcf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rangeISR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#a64e9d21d140ac54a306dab455b49adcf">rangeISR(void)</a></p>
<p>Include: ultrasonic.h</p>
<p>Description: Called when an range related interrupt is fired, acts as the service routine for the rangefinding module.</p>
<p>Arguments: None</p>
<p>Returns: None </p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a64e9d21d140ac54a306dab455b49adcf_icgraph.png" border="0" usemap="#Range_8c_a64e9d21d140ac54a306dab455b49adcf_icgraph" alt=""/></div>
<map name="Range_8c_a64e9d21d140ac54a306dab455b49adcf_icgraph" id="Range_8c_a64e9d21d140ac54a306dab455b49adcf_icgraph">
<area shape="rect" id="node2" href="Interrupts_8c.html#ac835f50b358d0d663df1b8b835f9bb87" title="lowISR" alt="" coords="130,5,193,32"/><area shape="rect" id="node4" href="Interrupts_8c.html#ae1ef1358e10604d046f54fc0b93c514c" title="highISR" alt="" coords="128,56,195,83"/><area shape="rect" id="node3" href="Interrupts_8c.html#a0bf42af14e1d16197d7eb27ac5addca0" title="lowVector" alt="" coords="245,5,324,32"/><area shape="rect" id="node5" href="Interrupts_8c.html#a6b8605436b00e1a9db52f2cb2094fdfd" title="highVector" alt="" coords="243,56,327,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af470fd0f0b96399b344f11783b4ef7f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int rangeUS </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>temp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3">rangeUS(unsigned char temp)</a></p>
<p>Include: ultrasonic.h</p>
<p>Description: Returns the result of the ultrasonic read (zero if no target found). Will poll until measurement is complete.</p>
<p>Arguments: tempx2 - 2x the temperature in deg Celsius</p>
<p>Returns: Distance in mm (unsigned int) </p>

<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_af470fd0f0b96399b344f11783b4ef7f3_cgraph.png" border="0" usemap="#Range_8c_af470fd0f0b96399b344f11783b4ef7f3_cgraph" alt=""/></div>
<map name="Range_8c_af470fd0f0b96399b344f11783b4ef7f3_cgraph" id="Range_8c_af470fd0f0b96399b344f11783b4ef7f3_cgraph">
<area shape="rect" id="node2" href="Range_8c.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="125,107,180,133"/><area shape="rect" id="node3" href="Range_8c.html#a07a4c592815b5e6ae178f93a7764ceb2" title="configureRange" alt="" coords="228,31,339,57"/><area shape="rect" id="node7" href="Range_8c.html#a4571d632d0c84c18c4aefd1c7b63cb8a" title="beginUS" alt="" coords="248,81,319,108"/><area shape="rect" id="node8" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="242,132,325,159"/><area shape="rect" id="node4" href="Temp_8c.html#afd08db2b1a6d6af19e39f10dc453332c" title="readTemp" alt="" coords="393,5,472,32"/><area shape="rect" id="node6" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a" title="configureAD" alt="" coords="387,56,479,83"/><area shape="rect" id="node5" href="Temp_8c.html#a4946ccbc1990e831667bffded1147c4f" title="readTempx2" alt="" coords="527,5,620,32"/></map>
</div>
</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_af470fd0f0b96399b344f11783b4ef7f3_icgraph.png" border="0" usemap="#Range_8c_af470fd0f0b96399b344f11783b4ef7f3_icgraph" alt=""/></div>
<map name="Range_8c_af470fd0f0b96399b344f11783b4ef7f3_icgraph" id="Range_8c_af470fd0f0b96399b344f11783b4ef7f3_icgraph">
<area shape="rect" id="node2" href="Range_8h.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="125,107,180,133"/><area shape="rect" id="node3" href="Range_8c.html#a8606bd1052dde0e7c32eddad8699f4f4" title="calibrateRange" alt="" coords="231,5,339,32"/><area shape="rect" id="node4" href="Range_8h.html#a87c8e64ddc596f3e6b72ee861f671168" title="readTargetState" alt="" coords="228,56,343,83"/><area shape="rect" id="node7" href="Tracking_8h.html#a4f0ebbcddf842d008fbfebb705374c30" title="track" alt="" coords="396,107,447,133"/><area shape="rect" id="node8" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="244,157,327,184"/><area shape="rect" id="node5" href="Tracking_8h.html#ac80b505821d79e98e9108b12d12c5db9" title="search" alt="" coords="391,56,452,83"/><area shape="rect" id="node6" href="newmain_8c.html#acdef7a1fd863a6d3770c1268cb06add3" title="Program entry point. " alt="" coords="500,81,551,108"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a90ce8835c75e17b8e2d15eca3e6ae82f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int rawRange </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<p> Function: speed_sound(unsigned char tempx2)</p>
<p>Include:</p>
<p>Description: Returns the calibration offset to calculate the raw data</p>
<p>Arguments: None</p>
<p>Returns: None </p>

</div>
</div>
<a class="anchor" id="a87c8e64ddc596f3e6b72ee861f671168"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Common_8h.html#a2db986326a654991cce9b1c2b1670677">TargetState</a> readTargetState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
<p> Function: <a class="el" href="Range_8c.html#a87c8e64ddc596f3e6b72ee861f671168">readTargetState(void)</a></p>
<p>Include: <a class="el" href="Range_8h.html">Range.h</a></p>
<p>Description: Does the same thing as getTargetState, but actually performs a <a class="el" href="Range_8c.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. ">range()</a> read</p>
<p>Arguments: None</p>
<p>Returns: the target state </p>

<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a87c8e64ddc596f3e6b72ee861f671168_cgraph.png" border="0" usemap="#Range_8c_a87c8e64ddc596f3e6b72ee861f671168_cgraph" alt=""/></div>
<map name="Range_8c_a87c8e64ddc596f3e6b72ee861f671168_cgraph" id="Range_8c_a87c8e64ddc596f3e6b72ee861f671168_cgraph">
<area shape="rect" id="node2" href="Range_8c.html#aff3698f3a7b3b5963d8e6b305a165d71" title="Samples the range. " alt="" coords="168,132,223,159"/><area shape="rect" id="node3" href="Range_8c.html#a07a4c592815b5e6ae178f93a7764ceb2" title="configureRange" alt="" coords="271,31,381,57"/><area shape="rect" id="node7" href="Range_8c.html#a4571d632d0c84c18c4aefd1c7b63cb8a" title="beginUS" alt="" coords="291,81,361,108"/><area shape="rect" id="node8" href="Range_8c.html#af470fd0f0b96399b344f11783b4ef7f3" title="rangeUS" alt="" coords="290,132,362,159"/><area shape="rect" id="node9" href="Range_8c.html#a71fa1634c2a7d76287ac872b5cfed382" title="fuseRange" alt="" coords="285,183,367,209"/><area shape="rect" id="node4" href="Temp_8c.html#afd08db2b1a6d6af19e39f10dc453332c" title="readTemp" alt="" coords="436,5,515,32"/><area shape="rect" id="node6" href="Range_8c.html#ac7337ef2da4c9ab03257562ec33bbb8a" title="configureAD" alt="" coords="429,56,521,83"/><area shape="rect" id="node5" href="Temp_8c.html#a4946ccbc1990e831667bffded1147c4f" title="readTempx2" alt="" coords="569,5,663,32"/></map>
</div>
</p>

<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="Range_8c_a87c8e64ddc596f3e6b72ee861f671168_icgraph.png" border="0" usemap="#Range_8c_a87c8e64ddc596f3e6b72ee861f671168_icgraph" alt=""/></div>
<map name="Range_8c_a87c8e64ddc596f3e6b72ee861f671168_icgraph" id="Range_8c_a87c8e64ddc596f3e6b72ee861f671168_icgraph">
<area shape="rect" id="node2" href="Tracking_8h.html#ac80b505821d79e98e9108b12d12c5db9" title="search" alt="" coords="168,5,229,32"/><area shape="rect" id="node4" href="Tracking_8h.html#a4f0ebbcddf842d008fbfebb705374c30" title="track" alt="" coords="173,56,224,83"/><area shape="rect" id="node3" href="newmain_8c.html#acdef7a1fd863a6d3770c1268cb06add3" title="Program entry point. " alt="" coords="277,31,328,57"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a8976a8edd47f4f691d54e563d4e649b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">signed int calibration_offset_IR = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af421fb22b292f4b39367c73817a26993"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">signed int calibration_offset_US = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3e5f92f759a1957263c83a507c449b39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Common_8h.html#a2db986326a654991cce9b1c2b1670677">TargetState</a> current_target_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aab7f4dddd362aafa4a558c057f89319f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lastIRRange = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad3cf40ad92b220b5e39aa159caa45f65"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lastRange = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a44690364de54cfeef62a4e79880603c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lastUSRange = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4b6dc56220469aa5e4180dad6d68335f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile char measuringUS = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5f013ef4cde14fb1aad7b871dba2c743"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char numSamples = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad58a5e610e756c41b622dade80cadeb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int rateIR = 200</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae4a5266a7e06afbf25a15633e657c49f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char rateUS = 10</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5b9ca4eeeea8b3ce940d3fd19626ea02.html">Yavin4DefenceSystem</a></li><li class="navelem"><a class="el" href="dir_f71e1a7f144f8c2f668bd726f80a92e7.html">Code</a></li><li class="navelem"><a class="el" href="Range_8c.html">Range.c</a></li>
    <li class="footer">Generated on Sun Oct 26 2014 11:37:09 for Yavin IV Death Star Tracker by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
